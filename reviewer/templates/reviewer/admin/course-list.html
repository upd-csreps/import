{% extends 'reviewer/admin/admin.html' %}

{% load static %}
{% block title %}
	Course List
{% endblock %}


{% block admin_side %}
	<div class="tab-pane fade show active" id="v-pills-users" role="tabpanel" aria-labelledby="v-pills-users-tab">

		<div class="d-flex justify-content-between">
			<h2 class="font-weight-bold mb-4">Course List</h2>
			<div class="d-inline-block">

					<a href="{% url 'admin_course' %}">
						<button type="button" class="btn btn-light px-3 d-flex" >
							<div class="my-auto d-flex">
								<i class="material-icons">
									library_add
								</i>
								<span class="my-auto ml-1 d-none d-md-block">
								Add Course</span>	
							</div>
						</button>
					</a>
				</div>
		</div>
		
		{% for course in courselist %}
			<div class="p-4 mb-3 row layer-container">
				<div class="col-8">
					<a href="{% url 'course' course.code|lower course.number %}" class="d-flex flex-wrap">
						<div class="my-auto mr-3 course-thumb" style="{% if course.image %}background-image: url('{{course.image.url}}'); {%endif%}">
						</div>
						<div class="my-auto mx-3 d-inline-flex flex-column">
							<span class="font-weight-bold comment-username">
								{{course.name}}

								{% if not course.visible %}
								<i class="material-icons">
									visibility_off
								</i>
								{% endif %}
							</span>
							<small class="text-muted">{{course.title}}</small>
						</div>
					</a>
				</div>


				<div class="col-4 d-flex">
					<div class="ml-auto my-auto d-flex flex-column">
						<i class="togglable material-icons disabled-color my-auto">
							visible
						</i>

					</div>
				</div>
			</div>
		{% endfor %}

		<div class="modal fade" id="PasswordModalCenter" tabindex="-1" role="dialog" aria-labelledby="PasswordModalCenterTitle" aria-hidden="true">
		  <div class="modal-dialog modal-dialog-centered" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title">Confirm action</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <form class="p-3" action="{% url 'admin_users' %}" method="post">
		      		{% csrf_token %}
			      <div class="modal-body">
			        Please enter your password below.
				    <input class="form-control my-3" type="password" name="password" required>
				   
			      </div>
			      <input class="username-submit" type="hidden" value="" name="username">
			      <div class="modal-footer">
			        <button class="btn btn-primary d-inline-flex verify-button" type="submit" >
						<i class="material-icons my-auto material-icon-sm mr-2">
						verified_user
						</i>
						<span class="my-auto">Make Superuser</span>
					</button>
			      </div>
			   </form>
		    </div>
		  </div>
		</div>

	</div>

{% endblock %}


{% block scripts %}

	<script>

		var uname2change;

		$(".superbutton").click(function(){
			uname2change = $(this).attr("data-username");
			$(".username-submit").attr("value", uname2change);
		});

		{% if message %}
			alert("{{message|safe}}");
			window.location.href = window.location.href;
		{% endif %}


	</script>

{% endblock %}