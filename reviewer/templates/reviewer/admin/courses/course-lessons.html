{% extends 'reviewer/admin/admin.html' %}

{% load static %}
{% block title %}
	Course List
{% endblock %}


{% block admin_side %}
	<div class="tab-pane fade show active" id="v-pills-courses" role="tabpanel" aria-labelledby="v-pills-courses-tab">
		<div class="d-flex justify-content-between mb-3">
			<div class="mb-4 d-flex">
				<h2 class="font-weight-bold my-auto">{{course.name}}</h2>
				<i class="material-icons h3 mx-2 my-auto">
					arrow_forward
				</i>
				<i class="material-icons import-font-primary my-auto mr-2">
					assignment
				</i>
				<h4 class="my-auto">Lessons</h4>
			</div>
			<div class="d-flex align-items-center">

				<button type="button" class="btn btn-light px-3 mr-2 d-flex">
					<div class="my-auto d-flex">
						<i class="material-icons">
							reorder
						</i>
						<span class="my-auto ml-1 d-none d-md-block">
							Reorder
						</span>	
					</div>
				</button>
				
				<button type="button" class="btn btn-light px-3 d-flex">
					<div class="my-auto d-flex">
						<i class="material-icons">
							add
						</i>
						<span class="my-auto ml-1 d-none d-md-block">
							Add Lesson
						</span>	
					</div>
				</button>
				
			</div>
		</div>


		{% if lessons.count > 0 %}
			{% for lesson in lessons %}
				<div class="p-4 mb-3 row layer-container lesson" data-order="{{lesson.order}}">
					<div class="col-8 my-auto">
						<div class="d-flex flex-wrap">
							<div class="my-auto d-flex flex-column">
								<span class="font-weight-bold comment-username d-flex">
									<span class="my-auto">{{lesson.name}}</span>
									{% if lesson.verified %}
										<i class="material-icons material-icon-sm import-font-primary p-0 my-auto mx-2 info-help" title="This lesson is verified.">check_circle</i>
									{% endif %}
								</span>

								{% comment %}
								<div class="d-flex mt-2">
									<div class="my-auto mr-2" {% if user.fave_lang %} style="border-radius:100%; border: 1px solid #ababab; height: 35px; width: 35px; background-image: url('https://drive.google.com/uc?export=view&id={{user.fave_lang.imageID }}=s220')" {% endif %}>
									</div>
									<select class="form-control form-control-sm my-auto" style="width: initial;">
									  <option selected>Select programming language</option>
									  <option value="1">Python</option>
									  <option value="2">C</option>
									  <option value="3">Javascript</option>
									</select>
								</div>

								{% endcomment %}
							</div>
						</div>
					</div>

					
					<div class="col-4 d-flex my-auto">
						<div class="ml-auto d-flex">
							
							<a class="ml-2 my-auto" href="{% url 'admin_lesson' lesson.id  'edit' %}">
								<button  type="button" class="btn btn-light px-2 d-flex">
									<div class="m-auto d-flex">
										<i class="material-icons material-icon-sm">
											edit
										</i>
									</div>
								</button>
							</a>

							<a class="ml-2 delete-course my-auto" href="{% url 'admin_course_id'  course.code|lower course.number 'delete' %} " data-name="{{course.code}} {{course.number}}">
								<button  type="button" class="btn btn-danger px-2 d-flex">
									<div class="m-auto d-flex">
										<i class="material-icons material-icon-sm">
											delete
										</i>
									</div>
								</button>
							</a>
						</div>
					</div>		
				</div>
			{% endfor %}
		{% else %}
			<div class="text-center mt-4 d-flex text-muted">
				<div class="mx-auto d-flex"> 
					<i class="material-icons my-auto ml-0 mr-2">
						assignment
					</i>
					<span class="my-auto">No lessons available to show</span>
				</div>
			</div>
		{% endif %}
	</div>
{% endblock %}

{% block scripts %}
	<script>
		 $('.delete-course').on('click', function (e) { 
		 	confirm('Are you sure you want to delete ' + $(this).attr("data-name") + '?')? null: e.preventDefault();
		 });
	</script>
{% endblock %}