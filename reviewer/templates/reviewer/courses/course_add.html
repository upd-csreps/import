<h1 class="admin-title mb-3 mt-3 h1">
	<span class="d-inline-flex">
		<i class="material-icons my-auto mr-2 import-font-primary" style="font-size: inherit;">
			{% if title == 'Add Course'%}
					library_add
			{% elif title == 'Edit Course' %}
					edit
			{% endif %}
		</i>
		<span class="my-auto">
			{{title}}
			{% if title == 'Edit Course' %}
				<p class="h6 text-muted">{{courseform.name.value}}</p>
			{% endif %}
		</span>
	</span>
</h1>

{% if error %}
	<div class="w-100 alert-danger p-3 d-flex">
		<i class="material-icons mr-3 my-auto ml-0">
		error_outline
		</i>
		<span class="my-auto">{{error}}</span>
	</div>
{% endif %}
<div class="d-flex flex-column p-3 pb-0">
	<form class="form-group mb-0" method="POST" action="
		{% if title == 'Add Course' %}
			{% url 'admin_course' 'add' %}
		{% else %}
			{% url 'admin_course_id' 'edit' course_subj course_num %}
		{% endif %}
		" enctype="multipart/form-data">
		{% csrf_token %}

		<div class="row">
			<div class="col-lg-6">
				<div class="form-control-group mb-3">
					<h5>Course Code & No.</h5>
					{{ courseform.name }}
				</div>

				<div class="form-control-group mb-3">
					<h5>Course Title</h5>
					{{ courseform.title }}
				</div>				
				
			</div>

			<div class="col-lg-6">
				<div class="form-control-group mb-3">
					<h5>Course Description</h5>
					{{ courseform.description }}
				</div>

			</div>

		</div>

		<div class="row w-100">
			<div class="col-lg-6 mr-4 col-3">
				<div class="form-control-group course-image-upload d-none position-absolute">
					<div>
						{{ courseform.imagehascleared }}
					</div>

					<div>
						{{ courseform.image }}
					</div>
				</div>
				
				<h5>Photo</h5>
				<button class="mx-auto border-dashed import-image-drag {% if user.is_authenticated %}import-image-drag-enabled{%else%}-disabled{%endif%}" data-file-target="course-image-upload" style="border-width: 1px" type="button">
					{% if user.is_authenticated %}
						<div class="addphoto-popper ml-2 p-3">
							Add a photo
						</div>
					{% endif %}
					<i class="material-icons p-4">
						add_a_photo
					</i>
				</button>

				<script>
					try{
						PhotoUploadTooltip();
					}
					catch(error){

					}
				</script>
			</div>

			<div class="mt-4">
				<div class="form-group mb-2">
					<div class="d-inline-flex">
						<span class="my-auto mr-3">
						Old Course?
						</span> 
						<span class="my-auto d-none position-absolute old-curr-val">
							{{ courseform.old_curr }}
						</span>

						<i class="material-icons my-auto togglable {% if courseform.old_curr %}active-button{% endif %}" onclick="$('.old-curr-val input').click()">
							check_box{% if not courseform.old_curr %}_outline_blank{% endif %}
						</i>
					
						
					</div>
				</div>
 

				<div class="form-group">
					<p class="d-inline-flex">
						<span class="mr-3 my-auto">Visibility</span> 
						<span class="d-none position-absolute my-auto course-vis-val">
							{{ courseform.visible }}
						</span>
						<i class="material-icons my-auto togglable {% if courseform.visible %}active-button{% endif %}" onclick="$('.course-vis-val input').click()">
							visibility{% if not courseform.visible %}_off{%endif%}
						</i>

					</p>
				</div>

			</div>
		</div>

		<div class="d-flex mt-3">
			<div class="mx-auto w-100">
				<h4>Prequisites and Corequisites</h4>

				<button class="btn btn-primary d-flex" type="button" onclick="$('table').fadeToggle()"><i class="material-icons material-icon-sm my-auto mr-2">library_books</i> <span class="my-auto">Toggle prerequisites/corequisites</span></button>

				<table class="table mt-3 req-table" style="display: none">
				  <thead>
				    <tr>
				      <th scope="col">Course Name</th>
				      <th scope="col" class="text-center">Prerequisite</th>
				      <th scope="col" class="text-center">Corequsite</th>
				    </tr>
				  </thead>
				  <tbody>

				  	<fieldset>
					{% for course in courses %}
						<tr>
					      <td scope="row">
					      	{{course.name}}
					      	{% if not course.visible %}
						      	<i class="material-icons my-auto ml-2">
									visibility_off
								</i>
							{% endif %}
					      </td>
					      <td class="text-center">
					      	<input type="checkbox" class="form-check-input prereq" name="prereq" value="{{course.id}}" id="id_prereq_{{forloop.counter0}}">
					      </td>
					      <td class="text-center">
					      	<input type="checkbox" class="form-check-input coreq" name="coreq" value="{{course.id}}" id="id_coreq_{{forloop.counter0}}">
					      </td>
					    </tr>
					{% endfor %}
					</fieldset>
				  </tbody>
				</table>	
			</div>


			<script>
				var prereq_values = {{course_prereq}};
				var coreq_values = {{course_coreq}};

				for (i = 0; i < prereq_values.length ; i++){
					document.querySelector(".prereq[value='" + prereq_values[i] + "']").setAttribute('checked', 'checked');
				}

				for (i = 0; i < coreq_values.length ; i++){
					document.querySelector(".coreq[value='" + coreq_values[i] + "']").setAttribute('checked', 'checked');
				}
			</script>
		</div>

		<hr>
		<div class="w-100 d-flex mt-3">
			<div class="mr-auto form-group w-50 my-auto">
				<h6 class="font-weight-bold d-inline-flex mr-2">
					<i class="material-icons my-auto">
						verified_user
					</i>
					<span class="my-auto">
						Confirm Action
					</span>
				</h6>
				<input class="form-control my-3 w-100" name="password" type="password" placeholder="Type password to confirm" required>
			</div>
			<div class="form-group mt-auto">
				<input class="btn btn-primary ml-auto mr-auto mr-lg-0" type="submit" value="Submit">
			</div>	
		</div>	
			
	</form>
</div>